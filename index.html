<!doctype html>
<html lang="en">
<meta charset="UTF-8" />
<link rel="icon" type="image/svg+xml" href="/vite.svg" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Instrument+Serif:ital@0;1&family=Outfit:wght@100..900&display=swap"
  rel="stylesheet">
<title>Vite App</title>
</head>

<body>

  <!--Start screen-->
  <div id="start-screen" class="screen hidden">
    <!-- Start screen content: user enters name, selects categories -->
    <header class="header"></header>
    <section class="welcome-intro">
      <div class="left-panel">
        <h1>TECH QUIZ: TEST YOUR KNOWLEDGE AND SKILLS</h1>`
        <h2>WELCOME TO OUR INTERACTIVE QUIZ</h2>

        <p>
          Are you ready to put your tech knowlegde to the test?
          We have fun tech questions from various tech categories that you can tackle.
          </br></br>
          Take our quiz and see where you stand in our leaderboard of previous techies who took the test.
          With our randomised questions you can take as many tests as you please.
          </br></br>
          The tech landscape is a forever changing field, changes rapidly on a daily basis, stay up to
          date with the technology that impacts our daily lives.
          </br></br>
          Test how much you know and remember to have fun!
        </p>

        <input type="button" class="start-quiz" value="TAKE QUIZ">
      </div>

      <div class="right-panel">
        <img src="./src/assets/landing-page-side-panel.JPG" alt="right-panel-image">
      </div>
    </section>

    <section class="user-information" id="user-info">
      <H3>ENTER YOUR DETAILS</H3>
      <form id="user-details">
        <div>
          <label for="first-name">First Name</label>
          <input type="text" name="first-name" id="first-name" required>
        </div>

        <div>
          <label for="last-name">Last Name</label>
          <input type="text" name="last-name" id="last-name" required>
        </div>

        <div>
          <label for="username">Username</label>
          <input type="text" name="userName" id="userName" required>
        </div>

        <div>
          <label for="tech-category">Category</label>
          <select id="tech-category" name="tech-category" required>
            <option value="General IT" selected>General IT</option>
            <option value="Relational Database">Relational Database</option>
            <option value="HTML/CSS">HTML/CSS</option>
            <option value="JavaScript">JavaScript</option>
          </select>
        </div>

        <input type="button" class="submit-user-info" value="submit">
      </form>

    </section>
  </div>


  <!--User screen-->
  <div id="user-screen" class="screen hidden">
    <!-- Start screen content: user enters name, selects categories -->
  </div>



  <!--Quiz screen-->
  <div id="quiz-screen" class="screen active">
    <header class="screen__header"></header>
    <section class="screen__question"></section>
  </div>

  <!--Highscore screen-->
  <div id="highscore-screen" class="screen hidden">
    <!-- Start screen content: user enters name, selects categories -->
  </div>
  <div class="table-rank" id="leaderboard">
    <div class="table-header">
      <h1>Leaderboard</h1>
      <h4>Choose Category</h4>
      <select>
        <option>All Rankings</option>
        <option>HTML</option>
        <option>CSS</option>
        <option>Javascript</option>
        <option>Gaming and computers</option>
      </select>
    </div>
    <div class="table-body">
      <table>
        <thead>
          <tr>
            <th>Position</th>
            <th>Player Name</th>
            <th>Points</th>
          </tr>
        </thead>
        <tbody id="leaderboard-body"></tbody>
      </table>
    </div>
  </div>

  <script type="module" src="/src/main.js">
    /* Function to select high scores according to category */
    function selectByCategory(players, category) {
      if (category === "All Rankings") {
        return players;
      }
      return players.filter(
        (player) => player.category.toLowerCase() === category.toLowerCase()
          || (category === "Javascript" && player.category === "JS") ||
          (category === "Gaming and computers" && player.category === "Gaming")
      );
    }
    /* function to insert the data from local storage to UI of the leaderboard */
    function insertsDataOnBoard(players) {
      leaderBoardEl.innerHTML = "";

      players.forEach((player, i) => {
        const tableRow = document.createElement("tr");
        tableRow.innerHTML = `
        <td>${i + 1}</td>
        <td>${player.name}</td>
        <td>${player.score}</td>`;
        leaderBoardEl.appendChild(tableRow);
      });
    }

    const sortedPlayers = dbPlayers.sort((x, y) => y.score - x.score);


    insertsDataOnBoard(sortedPlayers);
    categoryEl.addEventListener("change", (e) => {
      const selectedCategory = e.target.value;
      const filteredPlayers = selectByCategory(sortedPlayers, selectedCategory);
      insertsDataOnBoard(filteredPlayers);
    });
  </script>
</body>

</html>